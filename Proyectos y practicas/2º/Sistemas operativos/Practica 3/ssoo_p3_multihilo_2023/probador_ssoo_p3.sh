#!/bin/bash
#set -x

declare -i nota=0
declare -i incremento=1


# ****************************************


testeo(){
   echo "File: " $1
   echo "Nprod: " $2
   echo "MCons: " $3
   echo "max_bank_accounts: " $4
   echo "Buffsize: " $5
   ./bank $1 $2 $3 $4 $5 > out_bank  2>/dev/null
   if diff -i -w -q --ignore-all-space $6 out_bank > /dev/null; then
      echo " OK"
      cat out_bank
      echo -n "1 " >> excel
      nota=$(( nota + incremento ))
      echo $nota
   else
      echo " Error"
      echo -n "0 " >> excel
      echo " === test === "
      cat  $1
      echo " === output ./bank  === "
      cat  out_bank
      echo " === expected output  === "
      cat  $6
   fi
   rm -f out*
   echo
   echo
}

testeoError(){
   echo "File: " $1
   echo "Nprod: " $2
   echo "MCons: " $3
   echo "max_bank_accounts: " $4
   echo "Buffsize: " $5
   eval ./bank $1 $2 $3 $4 $5 > /dev/null 2> /dev/null
   if [ $? -eq 0 ];
   then
      echo " Wrong returned value"
      echo -n "0 " >> excel
   else
      echo " OK"
      echo -n "1 " >> excel
      nota=$(( nota + incremento ))
      echo $nota
   fi
   echo
   echo
}

testeoErrorParams(){
   echo "File: " $1
   echo "Nprod: " $2
   echo "MCons: " $3
   echo "max_bank_accounts: " $4
   echo "Buffsize: " $5
   echo "Extra arg: " $6
   eval ./bank $1 $2 $3 $4 $5 $6 > /dev/null 2> /dev/null
   if [ $? -eq 0 ];
   then
      echo " Wrong returned value"
      echo -n "0 " >> excel
   else
      echo " OK"
      echo -n "1 " >> excel
      nota=$(( nota + incremento ))
      echo $nota
   fi
   echo
   echo
}


#*****************************************


if [ -z "$1" ]
  then
    echo "No argument supplied"
    exit
fi

clear

echo "*** TESTING P3 "


TDIR="./testdir"
mkdir $TDIR
cp $1 $TDIR

echo "File : $1"

cd $TDIR

text="50
CREAR 1
INGRESAR 1 100
CREAR 2
INGRESAR 2 50
TRASPASAR 1 2 30
TRASPASAR 2 1 20
RETIRAR 1 40
RETIRAR 2 60
SALDO 1
SALDO 2
CREAR 3
INGRESAR 3 20
CREAR 4
INGRESAR 4 500
TRASPASAR 3 4 10
TRASPASAR 4 3 200
RETIRAR 3 5
RETIRAR 4 100
SALDO 3
SALDO 4
CREAR 5
INGRESAR 5 1000
CREAR 6
INGRESAR 6 250
TRASPASAR 5 6 600
TRASPASAR 6 5 150
RETIRAR 5 80
RETIRAR 6 300
SALDO 5
SALDO 6
CREAR 7
INGRESAR 7 300
CREAR 8
INGRESAR 8 30
TRASPASAR 7 8 25
TRASPASAR 8 7 50
RETIRAR 7 250
RETIRAR 8 5
SALDO 7
SALDO 8
CREAR 9
INGRESAR 9 300
CREAR 10
INGRESAR 10 30
TRASPASAR 9 10 25
TRASPASAR 10 9 50
RETIRAR 9 250
RETIRAR 10 5
SALDO 9
SALDO 10"
echo -e "$text" > 50-50.test

text2="50
CREAR 1
INGRESAR 1 100
CREAR 2
INGRESAR 2 50
TRASPASAR 1 2 30
TRASPASAR 2 1 20
RETIRAR 1 40
RETIRAR 2 60
SALDO 1
SALDO 2
CREAR 3
INGRESAR 3 20
CREAR 4
INGRESAR 4 500
TRASPASAR 3 4 10
TRASPASAR 4 3 200
RETIRAR 3 5
RETIRAR 4 100
SALDO 3
SALDO 4
CREAR 5
INGRESAR 5 1000
CREAR 6
INGRESAR 6 250
TRASPASAR 5 6 600
TRASPASAR 6 5 150
RETIRAR 5 80
RETIRAR 6 300
SALDO 5
SALDO 6
CREAR 7
INGRESAR 7 300
CREAR 8
INGRESAR 8 30
TRASPASAR 7 8 25
TRASPASAR 8 7 50
RETIRAR 7 250
RETIRAR 8 5
SALDO 7
SALDO 8
CREAR 9
INGRESAR 9 300
CREAR 10
INGRESAR 10 30
TRASPASAR 9 10 25
TRASPASAR 10 9 50
RETIRAR 9 250
RETIRAR 10 5
SALDO 9
SALDO 10
CREAR 11
INGRESAR 11 100
CREAR 12
INGRESAR 12 50
TRASPASAR 11 12 30
TRASPASAR 12 11 20
RETIRAR 11 40
RETIRAR 12 60
SALDO 11
SALDO 12
CREAR 13
INGRESAR 13 20
CREAR 14
INGRESAR 14 500
TRASPASAR 13 14 10
TRASPASAR 14 13 200
RETIRAR 13 5
RETIRAR 14 100
SALDO 13
SALDO 14
CREAR 15
INGRESAR 15 1000
CREAR 16
INGRESAR 16 250
TRASPASAR 15 16 600
TRASPASAR 16 15 150
RETIRAR 15 80
RETIRAR 16 300
SALDO 15
SALDO 16
CREAR 17
INGRESAR 17 300
CREAR 18
INGRESAR 18 30
TRASPASAR 17 18 25
TRASPASAR 18 17 50
RETIRAR 17 250
RETIRAR 18 5
SALDO 17
SALDO 18
CREAR 19
INGRESAR 19 300
CREAR 20
INGRESAR 20 30
TRASPASAR 19 20 25
TRASPASAR 20 19 50
RETIRAR 19 250
RETIRAR 20 5
SALDO 19
SALDO 20
CREAR 21
INGRESAR 21 100
CREAR 22
INGRESAR 22 50
TRASPASAR 21 22 30
TRASPASAR 22 21 20
RETIRAR 21 40
RETIRAR 22 60
SALDO 21
SALDO 22
CREAR 23
INGRESAR 23 20
CREAR 24
INGRESAR 24 500
TRASPASAR 23 24 10
TRASPASAR 24 23 200
RETIRAR 23 5
RETIRAR 24 100
SALDO 23
SALDO 24
CREAR 25
INGRESAR 25 1000
CREAR 26
INGRESAR 26 250
TRASPASAR 25 26 600
TRASPASAR 26 25 150
RETIRAR 25 80
RETIRAR 26 300
SALDO 25
SALDO 26
CREAR 27
INGRESAR 27 300
CREAR 28
INGRESAR 28 30
TRASPASAR 27 28 25
TRASPASAR 28 27 50
RETIRAR 27 250
RETIRAR 28 5
SALDO 27
SALDO 28
CREAR 29
INGRESAR 29 300
CREAR 30
INGRESAR 30 30
TRASPASAR 29 30 25
TRASPASAR 30 29 50
RETIRAR 29 250
RETIRAR 30 5
SALDO 29
SALDO 30
CREAR 31
INGRESAR 31 100
CREAR 32
INGRESAR 32 50
TRASPASAR 31 32 30
TRASPASAR 32 31 20
RETIRAR 31 40
RETIRAR 31 60
SALDO 31
SALDO 32
CREAR 33
INGRESAR 33 20
CREAR 34
INGRESAR 34 500
TRASPASAR 33 34 10
TRASPASAR 34 33 200
RETIRAR 33 5
RETIRAR 34 100
SALDO 33
SALDO 34
CREAR 35
INGRESAR 35 1000
CREAR 36
INGRESAR 36 250
TRASPASAR 35 36 600
TRASPASAR 36 35 150
RETIRAR 35 80
RETIRAR 36 300
SALDO 35
SALDO 36
CREAR 37
INGRESAR 37 300
CREAR 38
INGRESAR 38 30
TRASPASAR 37 38 25
TRASPASAR 38 37 50
RETIRAR 37 250
RETIRAR 38 5
SALDO 37
SALDO 38
CREAR 39
INGRESAR 39 300
CREAR 40
INGRESAR 40 30
TRASPASAR 39 40 25
TRASPASAR 40 39 50
RETIRAR 39 250
RETIRAR 40 5
SALDO 39
SALDO 40"
echo -e "$text2" > 50-200.test

text3="200
CREAR 1
INGRESAR 1 100
CREAR 2
INGRESAR 2 50
TRASPASAR 1 2 30
TRASPASAR 2 1 20
RETIRAR 1 40
RETIRAR 2 60
SALDO 1
SALDO 2
CREAR 3
INGRESAR 3 20
CREAR 4
INGRESAR 4 500
TRASPASAR 3 4 10
TRASPASAR 4 3 200
RETIRAR 3 5
RETIRAR 4 100
SALDO 3
SALDO 4
CREAR 5
INGRESAR 5 1000
CREAR 6
INGRESAR 6 250
TRASPASAR 5 6 600
TRASPASAR 6 5 150
RETIRAR 5 80
RETIRAR 6 300
SALDO 5
SALDO 6
CREAR 7
INGRESAR 7 300
CREAR 8
INGRESAR 8 30
TRASPASAR 7 8 25
TRASPASAR 8 7 50
RETIRAR 7 250
RETIRAR 8 5
SALDO 7
SALDO 8
CREAR 9
INGRESAR 9 300
CREAR 10
INGRESAR 10 30
TRASPASAR 9 10 25
TRASPASAR 10 9 50
RETIRAR 9 250
RETIRAR 10 5
SALDO 9
SALDO 10"
echo -e "$text3" > 200-50.test

text4="200
CREAR 1
INGRESAR 1 100
CREAR 2
INGRESAR 2 50
TRASPASAR 1 2 30
TRASPASAR 2 1 20
RETIRAR 1 40
RETIRAR 2 60
SALDO 1
SALDO 2
CREAR 3
INGRESAR 3 20
CREAR 4
INGRESAR 4 500
TRASPASAR 3 4 10
TRASPASAR 4 3 200
RETIRAR 3 5
RETIRAR 4 100
SALDO 3
SALDO 4
CREAR 5
INGRESAR 5 1000
CREAR 6
INGRESAR 6 250
TRASPASAR 5 6 600
TRASPASAR 6 5 150
RETIRAR 5 80
RETIRAR 6 300
SALDO 5
SALDO 6
CREAR 7
INGRESAR 7 300
CREAR 8
INGRESAR 8 30
TRASPASAR 7 8 25
TRASPASAR 8 7 50
RETIRAR 7 250
RETIRAR 8 5
SALDO 7
SALDO 8
CREAR 9
INGRESAR 9 300
CREAR 10
INGRESAR 10 30
TRASPASAR 9 10 25
TRASPASAR 10 9 50
RETIRAR 9 250
RETIRAR 10 5
SALDO 9
SALDO 10
CREAR 11
INGRESAR 11 100
CREAR 12
INGRESAR 12 50
TRASPASAR 11 12 30
TRASPASAR 12 11 20
RETIRAR 11 40
RETIRAR 12 60
SALDO 11
SALDO 12
CREAR 13
INGRESAR 13 20
CREAR 14
INGRESAR 14 500
TRASPASAR 13 14 10
TRASPASAR 14 13 200
RETIRAR 13 5
RETIRAR 14 100
SALDO 13
SALDO 14
CREAR 15
INGRESAR 15 1000
CREAR 16
INGRESAR 16 250
TRASPASAR 15 16 600
TRASPASAR 16 15 150
RETIRAR 15 80
RETIRAR 16 300
SALDO 15
SALDO 16
CREAR 17
INGRESAR 17 300
CREAR 18
INGRESAR 18 30
TRASPASAR 17 18 25
TRASPASAR 18 17 50
RETIRAR 17 250
RETIRAR 18 5
SALDO 17
SALDO 18
CREAR 19
INGRESAR 19 300
CREAR 20
INGRESAR 20 30
TRASPASAR 19 20 25
TRASPASAR 20 19 50
RETIRAR 19 250
RETIRAR 20 5
SALDO 19
SALDO 20
CREAR 21
INGRESAR 21 100
CREAR 22
INGRESAR 22 50
TRASPASAR 21 22 30
TRASPASAR 22 21 20
RETIRAR 21 40
RETIRAR 22 60
SALDO 21
SALDO 22
CREAR 23
INGRESAR 23 20
CREAR 24
INGRESAR 24 500
TRASPASAR 23 24 10
TRASPASAR 24 23 200
RETIRAR 23 5
RETIRAR 24 100
SALDO 23
SALDO 24
CREAR 25
INGRESAR 25 1000
CREAR 26
INGRESAR 26 250
TRASPASAR 25 26 600
TRASPASAR 26 25 150
RETIRAR 25 80
RETIRAR 26 300
SALDO 25
SALDO 26
CREAR 27
INGRESAR 27 300
CREAR 28
INGRESAR 28 30
TRASPASAR 27 28 25
TRASPASAR 28 27 50
RETIRAR 27 250
RETIRAR 28 5
SALDO 27
SALDO 28
CREAR 29
INGRESAR 29 300
CREAR 30
INGRESAR 30 30
TRASPASAR 29 30 25
TRASPASAR 30 29 50
RETIRAR 29 250
RETIRAR 30 5
SALDO 29
SALDO 30
CREAR 31
INGRESAR 31 100
CREAR 32
INGRESAR 32 50
TRASPASAR 31 32 30
TRASPASAR 32 31 20
RETIRAR 31 40
RETIRAR 31 60
SALDO 31
SALDO 32
CREAR 33
INGRESAR 33 20
CREAR 34
INGRESAR 34 500
TRASPASAR 33 34 10
TRASPASAR 34 33 200
RETIRAR 33 5
RETIRAR 34 100
SALDO 33
SALDO 34
CREAR 35
INGRESAR 35 1000
CREAR 36
INGRESAR 36 250
TRASPASAR 35 36 600
TRASPASAR 36 35 150
RETIRAR 35 80
RETIRAR 36 300
SALDO 35
SALDO 36
CREAR 37
INGRESAR 37 300
CREAR 38
INGRESAR 38 30
TRASPASAR 37 38 25
TRASPASAR 38 37 50
RETIRAR 37 250
RETIRAR 38 5
SALDO 37
SALDO 38
CREAR 39
INGRESAR 39 300
CREAR 40
INGRESAR 40 30
TRASPASAR 39 40 25
TRASPASAR 40 39 50
RETIRAR 39 250
RETIRAR 40 5
SALDO 39
SALDO 40"
echo -e "$text4" > 200-200.test

unzip $1
touch empty.test
touch no_perm.test
chmod -r no_perm.test
chmod -w no_perm.test


if [ ! -f autores.txt ]; then
   echo "Error: missing autores.txt file"
   cd ..
   rm -r $TDIR
   exit
fi


make clean 2> /dev/null > /dev/null
make       2> /dev/null > /dev/null


echo "Compiling"
if [ ! -f bank ]; then
   echo "Error: does not compile"
   cd ..
   exit
else
   echo "OK"
fi


# BUILDING TESTS

res="1 CREAR 1 SALDO=0 TOTAL=0
2 INGRESAR 1 100 SALDO=100 TOTAL=100
3 CREAR 2 SALDO=0 TOTAL=100
4 INGRESAR 2 50 SALDO=50 TOTAL=150
5 TRASPASAR 1 2 30 SALDO=80 TOTAL=150
6 TRASPASAR 2 1 20 SALDO=90 TOTAL=150
7 RETIRAR 1 40 SALDO=50 TOTAL=110
8 RETIRAR 2 60 SALDO=0 TOTAL=50
9 SALDO 1 SALDO=50 TOTAL=50
10 SALDO 2 SALDO=0 TOTAL=50
11 CREAR 3 SALDO=0 TOTAL=50
12 INGRESAR 3 20 SALDO=20 TOTAL=70
13 CREAR 4 SALDO=0 TOTAL=70
14 INGRESAR 4 500 SALDO=500 TOTAL=570
15 TRASPASAR 3 4 10 SALDO=510 TOTAL=570
16 TRASPASAR 4 3 200 SALDO=210 TOTAL=570
17 RETIRAR 3 5 SALDO=205 TOTAL=565
18 RETIRAR 4 100 SALDO=210 TOTAL=465
19 SALDO 3 SALDO=205 TOTAL=465
20 SALDO 4 SALDO=210 TOTAL=465
21 CREAR 5 SALDO=0 TOTAL=465
22 INGRESAR 5 1000 SALDO=1000 TOTAL=1465
23 CREAR 6 SALDO=0 TOTAL=1465
24 INGRESAR 6 250 SALDO=250 TOTAL=1715
25 TRASPASAR 5 6 600 SALDO=850 TOTAL=1715
26 TRASPASAR 6 5 150 SALDO=550 TOTAL=1715
27 RETIRAR 5 80 SALDO=470 TOTAL=1635
28 RETIRAR 6 300 SALDO=400 TOTAL=1335
29 SALDO 5 SALDO=470 TOTAL=1335
30 SALDO 6 SALDO=400 TOTAL=1335
31 CREAR 7 SALDO=0 TOTAL=1335
32 INGRESAR 7 300 SALDO=300 TOTAL=1635
33 CREAR 8 SALDO=0 TOTAL=1635
34 INGRESAR 8 30 SALDO=30 TOTAL=1665
35 TRASPASAR 7 8 25 SALDO=55 TOTAL=1665
36 TRASPASAR 8 7 50 SALDO=325 TOTAL=1665
37 RETIRAR 7 250 SALDO=75 TOTAL=1415
38 RETIRAR 8 5 SALDO=0 TOTAL=1410
39 SALDO 7 SALDO=75 TOTAL=1410
40 SALDO 8 SALDO=0 TOTAL=1410
41 CREAR 9 SALDO=0 TOTAL=1410
42 INGRESAR 9 300 SALDO=300 TOTAL=1710
43 CREAR 10 SALDO=0 TOTAL=1710
44 INGRESAR 10 30 SALDO=30 TOTAL=1740
45 TRASPASAR 9 10 25 SALDO=55 TOTAL=1740
46 TRASPASAR 10 9 50 SALDO=325 TOTAL=1740
47 RETIRAR 9 250 SALDO=75 TOTAL=1490
48 RETIRAR 10 5 SALDO=0 TOTAL=1485
49 SALDO 9 SALDO=75 TOTAL=1485
50 SALDO 10 SALDO=0 TOTAL=1485"
echo -e "$res" > 50-50.res

res2="1 CREAR 1 SALDO=0 TOTAL=0
2 INGRESAR 1 100 SALDO=100 TOTAL=100
3 CREAR 2 SALDO=0 TOTAL=100
4 INGRESAR 2 50 SALDO=50 TOTAL=150
5 TRASPASAR 1 2 30 SALDO=80 TOTAL=150
6 TRASPASAR 2 1 20 SALDO=90 TOTAL=150
7 RETIRAR 1 40 SALDO=50 TOTAL=110
8 RETIRAR 2 60 SALDO=0 TOTAL=50
9 SALDO 1 SALDO=50 TOTAL=50
10 SALDO 2 SALDO=0 TOTAL=50
11 CREAR 3 SALDO=0 TOTAL=50
12 INGRESAR 3 20 SALDO=20 TOTAL=70
13 CREAR 4 SALDO=0 TOTAL=70
14 INGRESAR 4 500 SALDO=500 TOTAL=570
15 TRASPASAR 3 4 10 SALDO=510 TOTAL=570
16 TRASPASAR 4 3 200 SALDO=210 TOTAL=570
17 RETIRAR 3 5 SALDO=205 TOTAL=565
18 RETIRAR 4 100 SALDO=210 TOTAL=465
19 SALDO 3 SALDO=205 TOTAL=465
20 SALDO 4 SALDO=210 TOTAL=465
21 CREAR 5 SALDO=0 TOTAL=465
22 INGRESAR 5 1000 SALDO=1000 TOTAL=1465
23 CREAR 6 SALDO=0 TOTAL=1465
24 INGRESAR 6 250 SALDO=250 TOTAL=1715
25 TRASPASAR 5 6 600 SALDO=850 TOTAL=1715
26 TRASPASAR 6 5 150 SALDO=550 TOTAL=1715
27 RETIRAR 5 80 SALDO=470 TOTAL=1635
28 RETIRAR 6 300 SALDO=400 TOTAL=1335
29 SALDO 5 SALDO=470 TOTAL=1335
30 SALDO 6 SALDO=400 TOTAL=1335
31 CREAR 7 SALDO=0 TOTAL=1335
32 INGRESAR 7 300 SALDO=300 TOTAL=1635
33 CREAR 8 SALDO=0 TOTAL=1635
34 INGRESAR 8 30 SALDO=30 TOTAL=1665
35 TRASPASAR 7 8 25 SALDO=55 TOTAL=1665
36 TRASPASAR 8 7 50 SALDO=325 TOTAL=1665
37 RETIRAR 7 250 SALDO=75 TOTAL=1415
38 RETIRAR 8 5 SALDO=0 TOTAL=1410
39 SALDO 7 SALDO=75 TOTAL=1410
40 SALDO 8 SALDO=0 TOTAL=1410
41 CREAR 9 SALDO=0 TOTAL=1410
42 INGRESAR 9 300 SALDO=300 TOTAL=1710
43 CREAR 10 SALDO=0 TOTAL=1710
44 INGRESAR 10 30 SALDO=30 TOTAL=1740
45 TRASPASAR 9 10 25 SALDO=55 TOTAL=1740
46 TRASPASAR 10 9 50 SALDO=325 TOTAL=1740
47 RETIRAR 9 250 SALDO=75 TOTAL=1490
48 RETIRAR 10 5 SALDO=0 TOTAL=1485
49 SALDO 9 SALDO=75 TOTAL=1485
50 SALDO 10 SALDO=0 TOTAL=1485
51 CREAR 11 SALDO=0 TOTAL=1485
52 INGRESAR 11 100 SALDO=100 TOTAL=1585
53 CREAR 12 SALDO=0 TOTAL=1585
54 INGRESAR 12 50 SALDO=50 TOTAL=1635
55 TRASPASAR 11 12 30 SALDO=80 TOTAL=1635
56 TRASPASAR 12 11 20 SALDO=90 TOTAL=1635
57 RETIRAR 11 40 SALDO=50 TOTAL=1595
58 RETIRAR 12 60 SALDO=0 TOTAL=1535
59 SALDO 11 SALDO=50 TOTAL=1535
60 SALDO 12 SALDO=0 TOTAL=1535
61 CREAR 13 SALDO=0 TOTAL=1535
62 INGRESAR 13 20 SALDO=20 TOTAL=1555
63 CREAR 14 SALDO=0 TOTAL=1555
64 INGRESAR 14 500 SALDO=500 TOTAL=2055
65 TRASPASAR 13 14 10 SALDO=510 TOTAL=2055
66 TRASPASAR 14 13 200 SALDO=210 TOTAL=2055
67 RETIRAR 13 5 SALDO=205 TOTAL=2050
68 RETIRAR 14 100 SALDO=210 TOTAL=1950
69 SALDO 13 SALDO=205 TOTAL=1950
70 SALDO 14 SALDO=210 TOTAL=1950
71 CREAR 15 SALDO=0 TOTAL=1950
72 INGRESAR 15 1000 SALDO=1000 TOTAL=2950
73 CREAR 16 SALDO=0 TOTAL=2950
74 INGRESAR 16 250 SALDO=250 TOTAL=3200
75 TRASPASAR 15 16 600 SALDO=850 TOTAL=3200
76 TRASPASAR 16 15 150 SALDO=550 TOTAL=3200
77 RETIRAR 15 80 SALDO=470 TOTAL=3120
78 RETIRAR 16 300 SALDO=400 TOTAL=2820
79 SALDO 15 SALDO=470 TOTAL=2820
80 SALDO 16 SALDO=400 TOTAL=2820
81 CREAR 17 SALDO=0 TOTAL=2820
82 INGRESAR 17 300 SALDO=300 TOTAL=3120
83 CREAR 18 SALDO=0 TOTAL=3120
84 INGRESAR 18 30 SALDO=30 TOTAL=3150
85 TRASPASAR 17 18 25 SALDO=55 TOTAL=3150
86 TRASPASAR 18 17 50 SALDO=325 TOTAL=3150
87 RETIRAR 17 250 SALDO=75 TOTAL=2900
88 RETIRAR 18 5 SALDO=0 TOTAL=2895
89 SALDO 17 SALDO=75 TOTAL=2895
90 SALDO 18 SALDO=0 TOTAL=2895
91 CREAR 19 SALDO=0 TOTAL=2895
92 INGRESAR 19 300 SALDO=300 TOTAL=3195
93 CREAR 20 SALDO=0 TOTAL=3195
94 INGRESAR 20 30 SALDO=30 TOTAL=3225
95 TRASPASAR 19 20 25 SALDO=55 TOTAL=3225
96 TRASPASAR 20 19 50 SALDO=325 TOTAL=3225
97 RETIRAR 19 250 SALDO=75 TOTAL=2975
98 RETIRAR 20 5 SALDO=0 TOTAL=2970
99 SALDO 19 SALDO=75 TOTAL=2970
100 SALDO 20 SALDO=0 TOTAL=2970
101 CREAR 21 SALDO=0 TOTAL=2970
102 INGRESAR 21 100 SALDO=100 TOTAL=3070
103 CREAR 22 SALDO=0 TOTAL=3070
104 INGRESAR 22 50 SALDO=50 TOTAL=3120
105 TRASPASAR 21 22 30 SALDO=80 TOTAL=3120
106 TRASPASAR 22 21 20 SALDO=90 TOTAL=3120
107 RETIRAR 21 40 SALDO=50 TOTAL=3080
108 RETIRAR 22 60 SALDO=0 TOTAL=3020
109 SALDO 21 SALDO=50 TOTAL=3020
110 SALDO 22 SALDO=0 TOTAL=3020
111 CREAR 23 SALDO=0 TOTAL=3020
112 INGRESAR 23 20 SALDO=20 TOTAL=3040
113 CREAR 24 SALDO=0 TOTAL=3040
114 INGRESAR 24 500 SALDO=500 TOTAL=3540
115 TRASPASAR 23 24 10 SALDO=510 TOTAL=3540
116 TRASPASAR 24 23 200 SALDO=210 TOTAL=3540
117 RETIRAR 23 5 SALDO=205 TOTAL=3535
118 RETIRAR 24 100 SALDO=210 TOTAL=3435
119 SALDO 23 SALDO=205 TOTAL=3435
120 SALDO 24 SALDO=210 TOTAL=3435
121 CREAR 25 SALDO=0 TOTAL=3435
122 INGRESAR 25 1000 SALDO=1000 TOTAL=4435
123 CREAR 26 SALDO=0 TOTAL=4435
124 INGRESAR 26 250 SALDO=250 TOTAL=4685
125 TRASPASAR 25 26 600 SALDO=850 TOTAL=4685
126 TRASPASAR 26 25 150 SALDO=550 TOTAL=4685
127 RETIRAR 25 80 SALDO=470 TOTAL=4605
128 RETIRAR 26 300 SALDO=400 TOTAL=4305
129 SALDO 25 SALDO=470 TOTAL=4305
130 SALDO 26 SALDO=400 TOTAL=4305
131 CREAR 27 SALDO=0 TOTAL=4305
132 INGRESAR 27 300 SALDO=300 TOTAL=4605
133 CREAR 28 SALDO=0 TOTAL=4605
134 INGRESAR 28 30 SALDO=30 TOTAL=4635
135 TRASPASAR 27 28 25 SALDO=55 TOTAL=4635
136 TRASPASAR 28 27 50 SALDO=325 TOTAL=4635
137 RETIRAR 27 250 SALDO=75 TOTAL=4385
138 RETIRAR 28 5 SALDO=0 TOTAL=4380
139 SALDO 27 SALDO=75 TOTAL=4380
140 SALDO 28 SALDO=0 TOTAL=4380
141 CREAR 29 SALDO=0 TOTAL=4380
142 INGRESAR 29 300 SALDO=300 TOTAL=4680
143 CREAR 30 SALDO=0 TOTAL=4680
144 INGRESAR 30 30 SALDO=30 TOTAL=4710
145 TRASPASAR 29 30 25 SALDO=55 TOTAL=4710
146 TRASPASAR 30 29 50 SALDO=325 TOTAL=4710
147 RETIRAR 29 250 SALDO=75 TOTAL=4460
148 RETIRAR 30 5 SALDO=0 TOTAL=4455
149 SALDO 29 SALDO=75 TOTAL=4455
150 SALDO 30 SALDO=0 TOTAL=4455
151 CREAR 31 SALDO=0 TOTAL=4455
152 INGRESAR 31 100 SALDO=100 TOTAL=4555
153 CREAR 32 SALDO=0 TOTAL=4555
154 INGRESAR 32 50 SALDO=50 TOTAL=4605
155 TRASPASAR 31 32 30 SALDO=80 TOTAL=4605
156 TRASPASAR 32 31 20 SALDO=90 TOTAL=4605
157 RETIRAR 31 40 SALDO=50 TOTAL=4565
158 RETIRAR 31 60 SALDO=-10 TOTAL=4505
159 SALDO 31 SALDO=-10 TOTAL=4505
160 SALDO 32 SALDO=60 TOTAL=4505
161 CREAR 33 SALDO=0 TOTAL=4505
162 INGRESAR 33 20 SALDO=20 TOTAL=4525
163 CREAR 34 SALDO=0 TOTAL=4525
164 INGRESAR 34 500 SALDO=500 TOTAL=5025
165 TRASPASAR 33 34 10 SALDO=510 TOTAL=5025
166 TRASPASAR 34 33 200 SALDO=210 TOTAL=5025
167 RETIRAR 33 5 SALDO=205 TOTAL=5020
168 RETIRAR 34 100 SALDO=210 TOTAL=4920
169 SALDO 33 SALDO=205 TOTAL=4920
170 SALDO 34 SALDO=210 TOTAL=4920
171 CREAR 35 SALDO=0 TOTAL=4920
172 INGRESAR 35 1000 SALDO=1000 TOTAL=5920
173 CREAR 36 SALDO=0 TOTAL=5920
174 INGRESAR 36 250 SALDO=250 TOTAL=6170
175 TRASPASAR 35 36 600 SALDO=850 TOTAL=6170
176 TRASPASAR 36 35 150 SALDO=550 TOTAL=6170
177 RETIRAR 35 80 SALDO=470 TOTAL=6090
178 RETIRAR 36 300 SALDO=400 TOTAL=5790
179 SALDO 35 SALDO=470 TOTAL=5790
180 SALDO 36 SALDO=400 TOTAL=5790
181 CREAR 37 SALDO=0 TOTAL=5790
182 INGRESAR 37 300 SALDO=300 TOTAL=6090
183 CREAR 38 SALDO=0 TOTAL=6090
184 INGRESAR 38 30 SALDO=30 TOTAL=6120
185 TRASPASAR 37 38 25 SALDO=55 TOTAL=6120
186 TRASPASAR 38 37 50 SALDO=325 TOTAL=6120
187 RETIRAR 37 250 SALDO=75 TOTAL=5870
188 RETIRAR 38 5 SALDO=0 TOTAL=5865
189 SALDO 37 SALDO=75 TOTAL=5865
190 SALDO 38 SALDO=0 TOTAL=5865
191 CREAR 39 SALDO=0 TOTAL=5865
192 INGRESAR 39 300 SALDO=300 TOTAL=6165
193 CREAR 40 SALDO=0 TOTAL=6165
194 INGRESAR 40 30 SALDO=30 TOTAL=6195
195 TRASPASAR 39 40 25 SALDO=55 TOTAL=6195
196 TRASPASAR 40 39 50 SALDO=325 TOTAL=6195
197 RETIRAR 39 250 SALDO=75 TOTAL=5945
198 RETIRAR 40 5 SALDO=0 TOTAL=5940
199 SALDO 39 SALDO=75 TOTAL=5940
200 SALDO 40 SALDO=0 TOTAL=5940"
echo -e "$res2" > 200-200.res

# ERROR TESTS

testeoErrorParams 50-50.test 1 2 3 4 5
testeoError 50-50.test -1 1 1 1
testeoError 50-50.test 1 -1 1 1
testeoError 50-50.test 1 1 -1 1
testeoError 50-50.test 1 1 1 -1

# TESTS WITH FILES

testeo 50-50.test 3 2 10 10 50-50.res
testeoError 200-50.test 3 2 20 10
testeo 200-200.test 3 2 40 10 200-200.res
testeoError 50-200.test 3 2 20 10

# TESTING CONCURRENCY WITH DIFFERENT VALUES OF NPROD AND BUFFSIZE

testeo 200-200.test 1 1 40 10 200-200.res
testeo 200-200.test 1 1 40 2000 200-200.res
testeo 200-200.test 3 3 40 10 200-200.res
testeo 200-200.test 4 4 40 50 200-200.res
testeo 200-200.test 5 5 40 500 200-200.res
testeo 200-200.test 6 6 40 2000 200-200.res
testeo 200-200.test 4 4 40 2000 200-200.res
testeo 200-200.test 5 5 40 200 200-200.res
testeo 200-200.test 6 6 40 10 200-200.res

# GRADE & DELETE FILES

fnota=$((echo scale=2 ; echo $nota*10 / 18) | bc )
echo "Nota: $fnota"
echo $fnota > ../nota.txt

cp autores.txt ..
cd ..

rm -rf testdir